{% if is_paginated %}
  <ul class="pagination text-center" role="navigation" aria-label="Pagination">
    {% if page_obj.has_previous %}
      <li class="pagination-previous">
        <a href="?page={{ page_obj.previous_page_number }}"
          aria-label="Previous page">Previous</a>
      </li>
    {% endif %}
    {% for num in page_obj.paginator.page_range %}
      {% ifequal num page_obj.number %}
        <li class="current">
          <div>{{ num }}</div>
        </li>
      {% else %}
        {% if page_obj.number < num|add:"4" and page_obj.number > num|add:"-3" %}
          <li><a href="?page={{ num }}">{{ num }}</a></li>
        {% endif %}
      {% endifequal %}
    {% endfor %}
    {% if page_obj.number < page_obj.paginator.num_pages|add:"-3" %}
      <li class="ellipsis">...</li>
    {% endif %}
    {% if page_obj.number < page_obj.paginator.num_pages|add:"-2" %}
      <li><a href="?page={{ page_obj.paginator.num_pages }}">
        {{ page_obj.paginator.num_pages }}</a></li>
    {% endif %}
    {% if page_obj.has_next %}
      <li class="pagination-next">
        <a href="?page={{ page_obj.next_page_number }}"
        aria-label="Next page">Next</a>
      </li>
    {% endif %}
  </ul>
{% endif %}
